syntax = "proto3";

package gitaly;

import "shared.proto";

service CleanupService {
  rpc ApplyBfgObjectMap(stream ApplyBfgObjectMapRequest) returns (ApplyBfgObjectMapResponse) {}
}

message ApplyBfgObjectMapRequest {
  Repository repository = 1;
  // A raw object-map file as generated by BFG: https://rtyley.github.io/bfg-repo-cleaner
  // Each line in the file has two object SHAs, space-separated - the original
  // SHA of the object, and the SHA after BFG has rewritten the object.
  bytes object_map = 2;
}

message ApplyBfgObjectMapResponse {}
